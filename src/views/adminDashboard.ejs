<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Admin Dashboard - Exam Portal</title>
  <link rel="stylesheet" href="/stylesheets/adminDashboard.css" />
  <style>
    .organization-info {
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      color: white;
      padding: 20px;
      border-radius: 10px;
      margin-bottom: 20px;
    }
    
    .org-name {
      font-size: 24px;
      font-weight: bold;
      margin-bottom: 5px;
    }
    
    .org-subtitle {
      opacity: 0.9;
      font-size: 14px;
    }
    
    .exam-management {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 20px;
      margin-top: 20px;
    }
    
    .exam-card {
      background: white;
      border-radius: 10px;
      padding: 20px;
      box-shadow: 0 5px 15px rgba(0,0,0,0.1);
      transition: transform 0.2s;
    }
    
    .exam-card:hover {
      transform: translateY(-5px);
    }
    
    .exam-card h3 {
      color: #333;
      margin-bottom: 10px;
    }
    
    .exam-card p {
      color: #666;
      margin-bottom: 15px;
    }
    
    .btn {
      background: #667eea;
      color: white;
      padding: 10px 20px;
      border: none;
      border-radius: 5px;
      cursor: pointer;
      text-decoration: none;
      display: inline-block;
      transition: background 0.3s;
    }
    
    .btn:hover {
      background: #5a67d8;
    }
    
    .btn-success {
      background: #48bb78;
    }
    
    .btn-success:hover {
      background: #38a169;
    }
    
    .assigned-exams {
      margin-top: 30px;
    }
    
    .exam-list {
      background: white;
      border-radius: 10px;
      padding: 20px;
      box-shadow: 0 5px 15px rgba(0,0,0,0.1);
    }
    
    .exam-item {
      padding: 15px;
      border-bottom: 1px solid #eee;
      display: flex;
      justify-content: between;
      align-items: center;
    }
    
    .exam-item:last-child {
      border-bottom: none;
    }
    
    .exam-info h4 {
      color: #333;
      margin-bottom: 5px;
    }
    
    .exam-info p {
      color: #666;
      font-size: 14px;
      margin: 0;
    }
    
    .exam-actions {
      display: flex;
      gap: 10px;
    }
    
    .status-badge {
      padding: 4px 8px;
      border-radius: 4px;
      font-size: 12px;
      font-weight: bold;
    }
    
    .status-pending {
      background: #fed7d7;
      color: #c53030;
    }
    
    .status-approved {
      background: #c6f6d5;
      color: #22543d;
    }
    
    @media (max-width: 768px) {
      .exam-management {
        grid-template-columns: 1fr;
      }
    }
  </style>
</head>
<body>
  <div class="main-container">
    <header class="header-section">
      <div class="brand-logo">Exam Portal - Admin</div>
      <nav class="navigation-menu">
        <a href="/admin-dashboard" class="nav-link">Dashboard</a>
        <a href="#" class="nav-link" onclick="showCreateExam()">Create Exam</a>
        <a href="#" class="nav-link" onclick="showResults()">Results</a>
        <a href="#" class="nav-link" onclick="showSettings()">Settings</a>
      </nav>
      <div class="user-actions">
        <span id="adminName">Admin</span>
        <a href="/logout" class="action-btn logout-btn">Logout</a>
      </div>
    </header>

    <main class="content-area">
      <!-- Organization Information -->
      <div class="organization-info">
        <div class="org-name" id="organizationName">Loading...</div>
        <div class="org-subtitle">Admin Dashboard - Manage your organization's examinations</div>
      </div>

      <!-- Welcome Section -->
      <section class="welcome-card">
        <h1 class="welcome-title">Welcome to Admin Dashboard</h1>
        <p class="welcome-description">Manage your organization's exams, view results, and monitor student performance</p>
      </section>

      <!-- Exam Management Options -->
      <div class="exam-management">
        <div class="exam-card">
          <h3>üìù Create New Exam</h3>
          <p>Set up a new examination for your organization with coding challenges, MCQs, or mixed formats.</p>
          <button class="btn" onclick="showCreateExam()">Create Exam</button>
        </div>
        
        <div class="exam-card">
          <h3>üìä View Results</h3>
          <p>Monitor exam results, student performance, and generate detailed reports for analysis.</p>
          <button class="btn btn-success" onclick="showResults()">View Results</button>
        </div>
      </div>

      <!-- Assigned Exams Section -->
      <div class="assigned-exams">
        <h2>Your Assigned Exam Requests</h2>
        <div class="exam-list" id="assignedExamsList">
          <p>Loading assigned exams...</p>
        </div>
      </div>

      <!-- Stats Section -->
      <section class="stats-section">
        <div class="stat-card">
          <div class="stat-icon">ÔøΩ</div>
          <div class="stat-content">
            <div class="stat-number" id="totalExams">0</div>
            <div class="stat-label">Total Exams</div>
            <div class="stat-change" id="examsChange">Loading...</div>
          </div>
        </div>
        <div class="stat-card">
          <div class="stat-icon">üë•</div>
          <div class="stat-content">
            <div class="stat-number" id="totalStudents">0</div>
            <div class="stat-label">Students Enrolled</div>
            <div class="stat-change" id="studentsChange">Loading...</div>
          </div>
        </div>
        <div class="stat-card">
          <div class="stat-icon">‚úÖ</div>
          <div class="stat-content">
            <div class="stat-number" id="completedExams">0</div>
            <div class="stat-label">Completed Exams</div>
            <div class="stat-change" id="completedChange">Loading...</div>
          </div>
        </div>
        <div class="stat-card">
          <div class="stat-icon">‚≠ê</div>
          <div class="stat-content">
            <div class="stat-number" id="avgScore">0%</div>
            <div class="stat-label">Average Score</div>
            <div class="stat-change" id="scoreChange">Loading...</div>
          </div>
        </div>
      </section>
    </main>
  </div>

  <script>
    // Load admin info and organization details
    async function loadAdminInfo() {
      try {
        const response = await fetch('/api/v1/admin/profile');
        const result = await response.json();
        
        if (result.success) {
          document.getElementById('adminName').textContent = result.data.fullname;
          document.getElementById('organizationName').textContent = result.data.organization;
        }
      } catch (error) {
        console.error('Error loading admin info:', error);
      }
    }

    // Load assigned exam requests
    async function loadAssignedExams() {
      try {
        const response = await fetch('/api/v1/admin/assigned-exams');
        const result = await response.json();
        
        if (result.success) {
          const examsList = document.getElementById('assignedExamsList');
          
          if (result.data.length === 0) {
            examsList.innerHTML = '<p>No exam requests assigned to you yet.</p>';
            return;
          }
          
          examsList.innerHTML = result.data.map(exam => `
            <div class="exam-item">
              <div class="exam-info">
                <h4>${exam.examTitle}</h4>
                <p><strong>Organization:</strong> ${exam.organizationName}</p>
                <p><strong>Date:</strong> ${new Date(exam.examDate).toLocaleDateString()}</p>
                <p><strong>Type:</strong> ${exam.examType} | <strong>Duration:</strong> ${exam.duration} mins</p>
                <p><strong>Expected Students:</strong> ${exam.expectedStudents}</p>
              </div>
              <div class="exam-actions">
                <span class="status-badge status-approved">Approved</span>
                <button class="btn" onclick="manageExam('${exam._id}')">Manage</button>
              </div>
            </div>
          `).join('');
        }
      } catch (error) {
        console.error('Error loading assigned exams:', error);
        document.getElementById('assignedExamsList').innerHTML = '<p>Error loading assigned exams.</p>';
      }
    }

    // Load dashboard statistics
    async function loadDashboardStats() {
      try {
        const response = await fetch('/api/v1/admin/stats');
        const result = await response.json();
        
        if (result.success) {
          document.getElementById('totalExams').textContent = result.data.totalExams || 0;
          document.getElementById('totalStudents').textContent = result.data.totalStudents || 0;
          document.getElementById('completedExams').textContent = result.data.completedExams || 0;
          document.getElementById('avgScore').textContent = (result.data.avgScore || 0) + '%';
        }
      } catch (error) {
        console.error('Error loading stats:', error);
      }
    }

    // Navigation functions
    function showCreateExam() {
      alert('Create Exam feature will be implemented next! This will allow you to create coding challenges, MCQs, and mixed format exams.');
    }

    function showResults() {
      alert('Results feature will be implemented next! This will show detailed analytics and student performance reports.');
    }

    function showSettings() {
      alert('Settings feature will be implemented next! This will allow you to manage your organization preferences.');
    }

    function manageExam(examId) {
      alert(`Exam management interface for exam ID: ${examId} will be implemented next!`);
    }

    // Initialize dashboard
    document.addEventListener('DOMContentLoaded', function() {
      loadAdminInfo();
      loadAssignedExams();
      loadDashboardStats();
    });
  </script>
</body>
</html>
            <div class="stat-content">
              <div class="stat-number">8,932</div>
              <div class="stat-label">Completed Submissions</div>
              <div class="stat-change positive">+8% this month</div>
            </div>
          </div>
          <div class="stat-card">
            <div class="stat-icon">‚ö°</div>
            <div class="stat-content">
              <div class="stat-number">99.8%</div>
              <div class="stat-label">System Uptime</div>
              <div class="stat-change neutral">Last 30 days</div>
            </div>
          </div>
        </section>

        <section class="quick-actions">
          <h2 class="section-title">Quick Actions</h2>
          <div class="actions-grid">
            <a href="/admin/exams/create" class="action-card">
              <div class="action-icon">‚ûï</div>
              <h3 class="action-title">Create Exam</h3>
              <p class="action-description">Set up a new coding examination</p>
            </a>
            <a href="/admin/users/create" class="action-card">
              <div class="action-icon">üë§</div>
              <h3 class="action-title">Add User</h3>
              <p class="action-description">Register new student or instructor</p>
            </a>
            <a href="/admin/reports" class="action-card">
              <div class="action-icon">üìä</div>
              <h3 class="action-title">View Reports</h3>
              <p class="action-description">Access analytics and insights</p>
            </a>
            <a href="/admin/settings" class="action-card">
              <div class="action-icon">‚öôÔ∏è</div>
              <h3 class="action-title">System Settings</h3>
              <p class="action-description">Configure platform parameters</p>
            </a>
          </div>
        </section>

        <section class="recent-exams">
          <h2 class="section-title">Recent Exams</h2>
          <div class="exams-table">
            <div class="table-header">
              <div class="header-cell">Exam Name</div>
              <div class="header-cell">Created By</div>
              <div class="header-cell">Participants</div>
              <div class="header-cell">Status</div>
              <div class="header-cell">Actions</div>
            </div>
            <div class="table-row">
              <div class="table-cell">
                <h4 class="exam-title">React Development Assessment</h4>
                <p class="exam-date">Created 2 days ago</p>
              </div>
              <div class="table-cell">Dr. Sarah Johnson</div>
              <div class="table-cell">
                <div class="participant-count">45 / 50</div>
              </div>
              <div class="table-cell">
                <span class="status-badge active">Active</span>
              </div>
              <div class="table-cell">
                <a href="/admin/exams/1/view" class="table-btn view-btn">View</a>
                <a href="/admin/exams/1/edit" class="table-btn edit-btn">Edit</a>
              </div>
            </div>
            <div class="table-row">
              <div class="table-cell">
                <h4 class="exam-title">JavaScript Fundamentals</h4>
                <p class="exam-date">Created 1 week ago</p>
              </div>
              <div class="table-cell">Prof. Michael Chen</div>
              <div class="table-cell">
                <div class="participant-count">120 / 120</div>
              </div>
              <div class="table-cell">
                <span class="status-badge completed">Completed</span>
              </div>
              <div class="table-cell">
                <a href="/admin/exams/2/view" class="table-btn view-btn">View</a>
                <a href="/admin/exams/2/results" class="table-btn results-btn">Results</a>
              </div>
            </div>
            <div class="table-row">
              <div class="table-cell">
                <h4 class="exam-title">Data Structures Quiz</h4>
                <p class="exam-date">Created 3 days ago</p>
              </div>
              <div class="table-cell">Dr. Emily Rodriguez</div>
              <div class="table-cell">
                <div class="participant-count">0 / 75</div>
              </div>
              <div class="table-cell">
                <span class="status-badge draft">Draft</span>
              </div>
              <div class="table-cell">
                <a href="/admin/exams/3/edit" class="table-btn edit-btn">Edit</a>
                <a href="/admin/exams/3/publish" class="table-btn publish-btn">Publish</a>
              </div>
            </div>
          </div>
        </section>

        <section class="system-alerts">
          <h2 class="section-title">System Alerts</h2>
          <div class="alerts-list">
            <div class="alert-item info">
              <div class="alert-icon">‚ÑπÔ∏è</div>
              <div class="alert-content">
                <h4 class="alert-title">System Maintenance</h4>
                <p class="alert-message">Scheduled maintenance on Sunday, 2:00 AM - 4:00 AM EST</p>
                <span class="alert-time">Posted 6 hours ago</span>
              </div>
            </div>
            <div class="alert-item warning">
              <div class="alert-icon">‚ö†Ô∏è</div>
              <div class="alert-content">
                <h4 class="alert-title">High Server Load</h4>
                <p class="alert-message">CPU usage above 85% for the past 30 minutes</p>
                <span class="alert-time">Posted 2 hours ago</span>
              </div>
            </div>
            <div class="alert-item success">
              <div class="alert-icon">‚úÖ</div>
              <div class="alert-content">
                <h4 class="alert-title">Backup Completed</h4>
                <p class="alert-message">Daily database backup completed successfully</p>
                <span class="alert-time">Posted 1 hour ago</span>
              </div>
            </div>
          </div>
        </section>

        <section class="user-activity">
          <h2 class="section-title">Recent User Activity</h2>
          <div class="activity-list">
            <div class="activity-item">
              <div class="activity-avatar">üë®‚Äçüéì</div>
              <div class="activity-content">
                <p class="activity-text"><strong>John Smith</strong> completed React Development Assessment</p>
                <span class="activity-time">5 minutes ago</span>
              </div>
              <div class="activity-score">Score: 92%</div>
            </div>
            <div class="activity-item">
              <div class="activity-avatar">üë©‚Äçüéì</div>
              <div class="activity-content">
                <p class="activity-text"><strong>Emma Johnson</strong> started JavaScript Fundamentals exam</p>
                <span class="activity-time">12 minutes ago</span>
              </div>
              <div class="activity-status">In Progress</div>
            </div>
            <div class="activity-item">
              <div class="activity-avatar">üë®‚Äçüè´</div>
              <div class="activity-content">
                <p class="activity-text"><strong>Dr. Wilson</strong> created new Algorithm Design exam</p>
                <span class="activity-time">1 hour ago</span>
              </div>
              <div class="activity-status">Created</div>
            </div>
            <div class="activity-item">
              <div class="activity-avatar">üë©‚Äçüéì</div>
              <div class="activity-content">
                <p class="activity-text"><strong>Lisa Parker</strong> submitted Python Basics assessment</p>
                <span class="activity-time">2 hours ago</span>
              </div>
              <div class="activity-score">Score: 88%</div>
            </div>
          </div>
        </section>
      </div>
    </main>
  </div>
</body>
</html>
